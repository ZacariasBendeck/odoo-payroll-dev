<?xml version="1.0" encoding="UTF-8"?>
<odoo noupdate="1">

  <!-- 1) Minimal partner + employee -->
  <record id="partner_demo_employee" model="res.partner">
    <field name="name">Demo Employee</field>
    <field name="email">demo.employee@example.com</field>
  </record>

  <record id="employee_demo" model="hr.employee">
    <field name="name">Demo Employee</field>
    <!-- v18 field name -->
    <field name="private_address_id" ref="x_payroll_demo.partner_demo_employee"/>
    <field name="work_email">demo.employee@example.com</field>
  </record>

  <!-- 2) Create our own category for the test rule -->
  <record id="cat_test_allowance" model="hr.salary.rule.category">
    <field name="name">Test Allowances</field>
    <field name="code">TEST</field>
  </record>

  <!-- 3) Fixed +100 rule -->
  <record id="rule_test_allowance" model="hr.salary.rule">
    <field name="name">Test Allowance</field>
    <field name="code">TEST_ALLOW</field>
    <field name="sequence">1000</field>
    <field name="category_id" ref="x_payroll_demo.cat_test_allowance"/>
    <field name="appears_on_payslip">1</field>
    <field name="condition_select">python</field>
    <field name="condition_python">result = True</field>
    <field name="amount_select">fix</field>
    <field name="amount_fix">100.0</field>
    <field name="quantity">1.0</field>
  </record>

  <!-- 4) A salary structure that includes our rule -->
  <record id="structure_test" model="hr.payroll.structure">
    <field name="name">Test Structure</field>
    <field name="type_id" ref="payroll.structure_type_employee"/>
    <field name="rule_ids" eval="[(4, ref('x_payroll_demo.rule_test_allowance'))]"/>
  </record>

  <!-- 5) A draft payslip for this month (adjust dates if you like) -->
  <record id="payslip_demo" model="hr.payslip">
    <field name="name">Demo Payslip</field>
    <field name="employee_id" ref="x_payroll_demo.employee_demo"/>
    <field name="struct_id" ref="x_payroll_demo.structure_test"/>
    <field name="date_from">2025-08-01</field>
    <field name="date_to">2025-08-31</field>
  </record>

  <!-- 6) One worked-days line -->
  <record id="payslip_demo_worked" model="hr.payslip.worked_days">
    <field name="payslip_id" ref="x_payroll_demo.payslip_demo"/>
    <field name="name">Worked Days</field>
    <field name="code">WORK100</field>
    <field name="number_of_days">22</field>
    <field name="number_of_hours">176</field>
  </record>

</odoo>

